import{u as b,f as N,y as k,c as p,a as n,d as a,w as t,b as f,n as w,i as r,j as x,k as C,o as d,e as U,q as _,x as B,l as g}from"./index-CEviYTYm.js";import{_ as m}from"./RInput-B1ogfpup.js";import{R as M}from"./RButton-CTE1q-iz.js";const S={class:"container"},R={key:0,class:"mb-4"},q={__name:"Profile",setup(j){const v=C(),o=b(),e=N({}),y=async()=>{try{await g.patch(`api/users/${o.user.user_id}`,{first_name:e.value.firstName,last_name:e.value.lastName,patronymic:e.value.patronymic,email:e.value.email}),await o.loadUser(),alert("Данные обновлены!")}catch(c){console.error(c.message),alert("Ошибка!")}},V=()=>{o.logout(),v.push("/login")};return k(async()=>{await o.loadUser(),e.value={firstName:o.user.first_name,lastName:o.user.last_name,patronymic:o.user.patronymic,email:o.user.email}}),(c,l)=>{const u=f("v-col"),i=f("v-row");return d(),p("section",null,[n("div",S,[l[5]||(l[5]=n("h1",{class:"main-title"},"Личный кабинет",-1)),n("form",null,[a(i,null,{default:t(()=>[r(o).isMobile?_("",!0):(d(),U(u,{key:0},{default:t(()=>l[4]||(l[4]=[n("h2",null,"Данные аккаунта",-1)])),_:1})),a(u,null,{default:t(()=>[r(o).isMobile?(d(),p("h2",R,"Данные аккаунта")):_("",!0),a(i,null,{default:t(()=>[a(u,null,{default:t(()=>[a(m,{modelValue:e.value.lastName,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value.lastName=s),label:"Фамилия"},null,8,["modelValue"]),a(m,{modelValue:e.value.firstName,"onUpdate:modelValue":l[1]||(l[1]=s=>e.value.firstName=s),label:"Имя"},null,8,["modelValue"]),a(m,{modelValue:e.value.patronymic,"onUpdate:modelValue":l[2]||(l[2]=s=>e.value.patronymic=s),label:"Отчество"},null,8,["modelValue"])]),_:1}),a(u,null,{default:t(()=>[a(m,{modelValue:e.value.email,"onUpdate:modelValue":l[3]||(l[3]=s=>e.value.email=s),label:"Email"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(i,null,{default:t(()=>[a(u,{class:"d-flex justify-center"},{default:t(()=>[a(M,{class:B(r(o).isMobile?"w-100 mb-4":"mb-4"),text:"Изменить",onClick:y},null,8,["class"])]),_:1})]),_:1})]),n("button",{style:w({color:r(x).error}),onClick:V},"Выйти из аккаунта",4)])])}}};export{q as default};
